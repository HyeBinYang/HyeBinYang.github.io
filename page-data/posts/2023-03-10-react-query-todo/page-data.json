{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-tsx","path":"/posts/2023-03-10-react-query-todo/","result":{"data":{"markdownRemark":{"html":"<h1>React Query를 사용해서 Todo앱 만들기</h1>\n<p>React Query는 실제로 어떻게 사용하는지 익숙해지기 위해 간단한 Todo 앱을 만들어 봤습니다. 현재는 간단한 기능들이 추가가 됐지만 후에 추가해보고 싶은 기능이 있으면 계속 넣을 예정입니다.</p>\n<br/>\n<br/>\n<br/>\n<h2>Todo 리스트 불러오기</h2>\n<p><code class=\"language-text\">db.json</code>에 저장되어있는 <code class=\"language-text\">todos</code> 데이터를 불러옵니다. 불러오는동안 로딩중임을 알려주는 Spinner를 보여주고 query가 완료되면 todo 리스트가 렌더링 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// useTodoListQuery.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getTodoList</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axiosInstance<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"todos\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTodoListQuery</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token generic-function\"><span class=\"token function\">useQuery</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> AxiosError<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"todoList\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> getTodoList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoList.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TodoList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> todoList<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTodoListQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"loading\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Spinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Error<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>ul className<span class=\"token operator\">=</span><span class=\"token string\">\"todo__list\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>todoList <span class=\"token operator\">?</span> todoList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>TodoItem key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>todo<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>Todo 추가하기</h2>\n<p>입력창에 입력하고 enter를 치거나 +버튼을 누르면 Todo가 추가가 됩니다. <code class=\"language-text\">mutation</code>이 성공하면\ntodoList 쿼리키를 가진 query를 무효화시키고 refetch한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// useAddTodoMutation.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useAddTodoMutation</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTodo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>newTodo<span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axiosInstance<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">post</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"todos\"</span><span class=\"token punctuation\">,</span> newTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token generic-function\"><span class=\"token function\">useMutation</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token punctuation\">,</span> AxiosError<span class=\"token punctuation\">,</span> Todo<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>addTodo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">invalidateQueries</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"todoList\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러가 발생 했습니다. 다시 한번 시도해주세요.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoInput.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TodoInput</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> todoRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useAddTodoMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FormEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>todoRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">&amp;&amp;</span> todoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      mutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> title<span class=\"token operator\">:</span> todoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      todoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>form onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"todo__search\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todoRef<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"todo__search--text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"오늘 할 일\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button className<span class=\"token operator\">=</span><span class=\"token string\">\"todo__button\"</span><span class=\"token operator\">></span><span class=\"token operator\">+</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>Todo done 처리하기</h2>\n<p><code class=\"language-text\">checkbox</code>를 클릭하면 <code class=\"language-text\">handleToggleCheckbox</code> 이벤트 헨들러를 호출해서 todo의 <code class=\"language-text\">done</code>을 업데이트를 시켜주고 있습니다. <code class=\"language-text\">update mutation</code>이 성공하면 api 재요청을 안하고 기존 쿼리에서 return된 data값을 업데이트 시켜줬습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoItem.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleToggleCheckbox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  updateMutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>todo<span class=\"token punctuation\">,</span> done<span class=\"token operator\">:</span> <span class=\"token operator\">!</span>todo<span class=\"token punctuation\">.</span>done <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// useUpdateTodoMutation.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateTodo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>newTodo<span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axiosInstance<span class=\"token punctuation\">.</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/todos/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newTodo<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> newTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useUpdateTodoMutation</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span>updateTodo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      queryClient<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">setQueryData</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"todoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>oldData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>oldData<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> oldData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> newData<span class=\"token punctuation\">.</span>id <span class=\"token operator\">?</span> newData <span class=\"token operator\">:</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러가 발생 했습니다. 다시 한번 시도해주세요.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>Todo에 수정 버튼 누르기</h2>\n<p><code class=\"language-text\">수정</code> 버튼을 누르면 수정하는 modal창이 뜨고, <code class=\"language-text\">todoActionsContext</code>의 <code class=\"language-text\">toggleEditModal</code> 함수를 호출해서 modal창이 뜨고, <code class=\"language-text\">getTodo</code> 함수를 호출하여 <code class=\"language-text\">todoContext</code>의 <code class=\"language-text\">todo</code> state에 선택된 todo로 setState를 해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoList.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClickUpdate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  todoActionsContext<span class=\"token punctuation\">.</span><span class=\"token function\">toggleEditModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  todoActionsContext<span class=\"token punctuation\">.</span><span class=\"token function\">getTodo</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>수정 완료하기</h2>\n<p>모달의 <code class=\"language-text\">수정</code> 버튼을 누르면 updateMutation의 <code class=\"language-text\">mutate</code> 함수를 호출하여 업데이트된 값을 쿼리에 업데이트 합니다. 업데이트가 성공하면 <code class=\"language-text\">todoActionsContext</code>의 <code class=\"language-text\">toggleEditModal</code> 함수를 호출해서 모달창을 닫습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoEditModal.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClickUpdate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>inputEl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    updateTodoMutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>todoContext<span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">,</span> title<span class=\"token operator\">:</span> inputEl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          todoActionsContext<span class=\"token punctuation\">.</span><span class=\"token function\">toggleEditModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>Todo 삭제하기</h2>\n<p>deleteMutation의 <code class=\"language-text\">mutate</code>함수를 호출하여 해당 data를 삭제를 요청합니다. mutation이 성공하면 네트워크 재호출 없이 기존 data에서 해당 todo를 삭제시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoItem.tsx</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClickDelete</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> deleteMutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// useDeleteTodoMutation.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDeleteTodoMutation</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deleteTodo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>todoId<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> axiosInstance<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/todos/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>todoId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> todoId<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span>deleteTodo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>deleteTodoId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      queryClient<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">setQueryData</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"todoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>oldData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>oldData<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> oldData<span class=\"token operator\">?.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> deleteTodoId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러가 발생 했습니다. 다시 한번 시도해주세요.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<br/>\n<h2>성능 개선</h2>\n<p>React 프로파일링으로 성능 테스트를 해보았고 거기서 문제점을 발견을 했습니다. <strong>수정 버튼을 눌렀을때 모든 컴포넌트가 리렌더링을 하고 있었습니다.</strong> 모달 하나 띄우는건데 모든 컴포넌트가 리렌더링 되는건 분명 비효율적이라고 느껴졌습니다. 이러한 문제가 발생한 원인을 분석한 결과 다음과 같은 문제점을 발견했습니다.</p>\n<h3>state가 변경되면 action Context만 subscribe 하고있는 컴포넌트에서도 리렌더링이 발생하고 있었습니다.</h3>\n<p><code class=\"language-text\">action context</code>만 subscribe하고 싶은 컴포넌트에서 비효율적인 리렌더링을 막기위해서 <code class=\"language-text\">state context</code>와 <code class=\"language-text\">actions context</code>를 분리를 시켰습니다. 테스트 결과, actions context만 subscribe하고 있는 컴포넌트에서도 리렌더링이 발생하고 있었습니다.</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97d8fd4fd85fa169b6b37e6f0267e081/dd104/react-profile-before.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADGElEQVR42o2R20+bZRzH+0d4Y2Yyx4CeRjm0MAibdmiCOBvHYa5AKONYR4G+8PaFtZS29LS2sElbGAq6w4Vgsjg3kiWL0ZiwlRgHdEzQMRPjLubFdmH0wkQv/Ji+7dw8xotPvk+e/J5Pvnl+ClNDK03NnVi6bH/QaRUYdHgQRrwIkjeb/4Fd8jDiDnHkqAVFgbqUYn01bZ12jveIdPQ6aOsU6O13ITojDI2GZYSRJ2mXQn9i0BFEGpvi9aYOFIUaPUWl+xFdVkbHrZz0nEBy9eL09uELDzNxSpQJTkpyhqdGODMzxunkEyYTLmYXfLT3tKJQavWoiwy81lSLGB9ETAo4ZocYTtgRZwTEZDad8w6Et2y4LziZWj5F7KMQsStZIpeDJD6ewuLoQKHaZ0C5z8CePB21A1bMMyHM0wHM8Qx+zIkgLTNhmpMhjmXuEkG6l87S/cEc3UtZut6f5cTVc9QJfShUuYYF6hKqjXUcf1Ogd9CF1e7GNuxhQJqgX/TS75hgQPJjE330S34ZmxSQ6XNMMDQWxdTUnmmoJ9OyUFNGieEAjcc6sDsGEN3DnPR7cYUDuCMhPCEv40EP/qiPYMxHIOolGPMSjHoJRMaZjIdoabc8FmalSm2ZvHHT0cOcidRz+UIjF08bWYobic9ZmJ5tY/rtLhaXnSwuu3jvyjjnrnqY/9DNpU/82EdbnhJqs1JNkYFnnlWRjDr4bv0iG9difJuaY339Gpu3r/PpZ5ew9LxBffNhTC31mFobeNV8hEZLAzW1NU83zKIt3s9zzytZOL/IV/fu8/n6Nve//4Eff/qZX379jQcPHlJR9TK7dmvZW1BCXn6xzJ69OvJVZf8g1FWwa7eKuXcW2Ln7NdvbW9y69QXpdJpHjx5yd2eHg4dekZeoKa5AXVSewyDnvwrn3z3PnTubpFIpVldXWVtbY+XGCl9ubfFCTR15hTpZ8PidMvdlfxNqcsLpxFl27n3DzdQqG+nbrNy4KedGepPK6pfIV5X8P2F223p0pVWUVxoprzJiqHyRiqpD8rnUcAB1biYz+1fh71izayCOWPizAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"성능 개선 전\"\n        title=\"\"\n        src=\"/static/97d8fd4fd85fa169b6b37e6f0267e081/5a190/react-profile-before.png\"\n        srcset=\"/static/97d8fd4fd85fa169b6b37e6f0267e081/772e8/react-profile-before.png 200w,\n/static/97d8fd4fd85fa169b6b37e6f0267e081/e17e5/react-profile-before.png 400w,\n/static/97d8fd4fd85fa169b6b37e6f0267e081/5a190/react-profile-before.png 800w,\n/static/97d8fd4fd85fa169b6b37e6f0267e081/dd104/react-profile-before.png 1064w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>각각의 함수에 useCallback을 사용해 TodoActionsContext Provider에 전달했었지만 제가 원하는 방향으로 동작을 안했습니다. 그 이유는 각각의 함수에는 memorized 되었지만 막상 전달하고있는 <code class=\"language-text\">value props</code>인 <code class=\"language-text\">{getTodo, toggleEditModal}</code> 객체는 memorized 된 상태가 아니었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TodoContextProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> TodoContextProviderProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todo<span class=\"token punctuation\">,</span> setTodo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>editModal<span class=\"token punctuation\">,</span> setEditModal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> getTodo <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>todo<span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTodo</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> toggleEditModal <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>active<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setEditModal</span><span class=\"token punctuation\">(</span>active<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// value props인 {getTodo, toggleEditModal}은 memorized가 안된 상태입니다.</span>\n    <span class=\"token operator\">&lt;</span>TodoActionsContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>getTodo<span class=\"token punctuation\">,</span> toggleEditModal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>TodoContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> todo<span class=\"token punctuation\">,</span> editModal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TodoContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TodoActionsContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<br />\n<p>그래서 actions 객체에 필요한 메서드를 넣은 다음 useMemo를 사용해 memorizing을 했더니 원하는대로 동작이 됐습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// TodoContext.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TodoContextProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> TodoContextProviderProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todo<span class=\"token punctuation\">,</span> setTodo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Todo<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>editModal<span class=\"token punctuation\">,</span> setEditModal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// actions 객체 안에 메서드를 넣어서 관리를 했습니다.</span>\n  <span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function\">getTodo</span><span class=\"token punctuation\">(</span>todo<span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTodo</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">toggleEditModal</span><span class=\"token punctuation\">(</span>active<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setEditModal</span><span class=\"token punctuation\">(</span>active<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// 드디어 value props에 메모라이징된 값이 들어갔습니다!</span>\n    <span class=\"token operator\">&lt;</span>TodoActionsContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>actions<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>TodoContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> todo<span class=\"token punctuation\">,</span> editModal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TodoContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TodoActionsContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b694606d17d6af0f97c304f62f7dc2e1/84ee5/react-profile-after.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRUlEQVR42nXMy04TYRjG8bkOEw2aQktpGwqlLbT0fGSm7fRAwU5nSpGEQ6kNGy0gMcSQCGxQF55AEhZChETdkLjTSzBcgdGd0Tswf9MRikZY/PI8X773fYUhX4xARMIfFtuC0TRxaZS4WPiXdAmxQDJVxO2NIgyHJELxLOFEjnAr4zmkrPqXcruLcvkSCqmcxpA/gZAUk2TzKbL5dFvxZoEx3ShjpVH9PV4aRdHGUdT/lcpjaBMlQtEYgqeQwV8p4tdOVc4FzkyMEZnWSM5XSdQuMDfBSGOKQUlEGCgUcKkKLrWscyol3BUNl1ZmcELDWVbwTE3ir80yPDuN7wLDM9P46zX6xTSCKygREMeJyKouKmtEW5lVCWdUQmmVsKzpIrrKaZ731lwsX8XlH0FQ8hFqWpz5SoJ6VaQxKbEwlaZxK01zTuZePcfK7Xzb0rzM4lyGxVqGuzMpvS/VZJZrMulEEGGxaufxgk33vOnkzXqMnZUhnjbdHD308Xbdw+tVBwcPnOyvOni/6eN4K8zxVohPL1N8eBLhcM3DydEIG0sxhBsmBx3GAa519mO0efGGZcz2AGa7nw6Tm1iqzOajbe6vbbGxtc2744+Uqg06rV4C8SJ2d5zrJg9BUSQixRC6Lf3orA5MPX0YjDaMPX2YbQNcudpJrb7Azx/fOTn5zLevX4Bf3Gku639d5l66unvptrT2ejEY7QgmSz/nHH8OWxyYrQN0GCyk5CL7B4fs7O7x7MUOr3b3GFeqdBis9Nic+uzZXstvJWW3kF5G4bQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"성능 개선 후\"\n        title=\"\"\n        src=\"/static/b694606d17d6af0f97c304f62f7dc2e1/5a190/react-profile-after.png\"\n        srcset=\"/static/b694606d17d6af0f97c304f62f7dc2e1/772e8/react-profile-after.png 200w,\n/static/b694606d17d6af0f97c304f62f7dc2e1/e17e5/react-profile-after.png 400w,\n/static/b694606d17d6af0f97c304f62f7dc2e1/5a190/react-profile-after.png 800w,\n/static/b694606d17d6af0f97c304f62f7dc2e1/84ee5/react-profile-after.png 1076w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br/>\n<br/>\n<br/>\n<h2>고민해야할 부분</h2>\n<h2>유저가 실수로 삭제 버튼 눌렀을 때</h2>\n<p>유저가 실수로 삭제 버튼을 눌렀을 때, 바로 삭제되면 당황스럽고 다시 등록해야하는 귀찮은 작업을 해야할 것입니다. 심지어삭제된 todo의 내용이 좀 길었다면 까먹어서 다시 등록하기도 힘들 수도 있다고 생각합니다.</p>\n<br/>\n<h2>등록된 Todo가 너무 많을때</h2>\n<p>등록된 todo가 너무 많으면 현재 만들어진 기능만 보면 특정한 todo를 찾기가 너무 번거로워 보입니다. 이를 해결하기위해 <code class=\"language-text\">sort 기능</code>, <code class=\"language-text\">검색 기능</code> 등을 추가해야할거 같습니다.</p>\n<br/>\n<br/>\n<br/>\n<h2>소스 코드</h2>\n<p><a href=\"https://github.com/HyeBinYang/todo_by_react-query\">https://github.com/HyeBinYang/todo_by_react-query</a></p>","frontmatter":{"date":"March 10, 2023","slug":"/posts/2023-03-10-react-query-todo","title":"React Query를 이용해 Todo앱 만들기","category":"react-query"}}},"pageContext":{"id":"49b1b158-3022-51bd-8693-fc0933dcae5a","frontmatter__slug":"/posts/2023-03-10-react-query-todo","__params":{"frontmatter__slug":"posts"}}},"staticQueryHashes":["3436969420"],"slicesMap":{}}